\documentclass[11pt,a4paper]{book}
\setlength{\parskip}{0.7em}
\usepackage[a4paper]{geometry} %,left=2.5cm,right=3.5cm

% Para reducir los márgenes, activar el comando siguiente
% \usepackage{fullpage}

% Separación del encabezado
%\addtolength{\headsep}{0.5cm}

% Para que no haya sangría, activar el comando siguiente
\setlength{\parindent}{0pt}

% Configuración del idioma
\usepackage[spanish, activeacute]{babel}
\usepackage[utf8]{inputenc}

% Se cargan los paquetes de ecuaciones
% Las letras con DOBLE PALITO se cargan como \mathbb{letra}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{mathrsfs}

% Paquetes gráficos
\usepackage{graphics}
\usepackage{graphicx}
\usepackage{wrapfig}
\usepackage{rotating}
\usepackage{color}
\usepackage{cutwin}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{cutwin}
\usepackage{lipsum}

% Paquetes para tablas
\usepackage{longtable}
\usepackage{multicol}
\usepackage{multirow}

% Packetes para símbolos
\usepackage{latexsym}

% Paquetes para código fuente
\usepackage{listings}
\lstset{ frame=Ltb,
     xleftmargin=0.8cm,
     framerule=0pt,
     aboveskip=0.5cm,
     framextopmargin=3pt,
     framexbottommargin=3pt,
     framexleftmargin=0.4cm,
     framesep=0pt,
     rulesep=.4pt,
     backgroundcolor=\color{gray97},
     rulesepcolor=\color{black},
     %
     stringstyle=\ttfamily,
     showstringspaces = false,
     basicstyle=\footnotesize,
     commentstyle=\color{gray45},
     keywordstyle=\bfseries,
     %
     numbers=left,
     numbersep=15pt,
     numberstyle=\tiny,
     numberfirstline = false,
     breaklines=true,
   }
\lstloadlanguages{VHDL,Verilog}
\lstnewenvironment{listing}[1][]
   {\lstset{#1}\pagebreak[0]}{\pagebreak[0]}
\lstdefinestyle{consola}
   {basicstyle=\scriptsize\bf\ttfamily,
    backgroundcolor=\color{gray75},
   }
\lstdefinestyle{C}
   {language=C,
   }

% Paquete para hiperlinks
\usepackage[colorlinks=false]{hyperref}

% Colores
\usepackage{color,hyperref}
\definecolor{gray}{rgb}{0.9,0.9,0.9}
%\definecolor{black}{rgb}{0.0,0.0,0.0}
\definecolor{darkblue}{rgb}{0.0,0.0,0.3}
\definecolor{gray97}{gray}{.97}
\definecolor{gray75}{gray}{.75}
\definecolor{gray45}{gray}{.45}

% Vinculos
\hypersetup{colorlinks,breaklinks,
            linkcolor=black,urlcolor=darkblue,
            anchorcolor=darkblue,citecolor=darkblue}

% Paquete para hacer un índice
\usepackage{makeidx}
\makeindex

% Paquetes para encabezado y pie de página
\usepackage{fancyhdr}
\pagestyle{fancy}



% % XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
% % With this we ensure that the chapter and section
% % headings are in lowercase.
% \renewcommand{\chaptermark}[1]{%
% \markboth{#1}{}}
% \renewcommand{\sectionmark}[1]{%
% \markright{#1}}
% \fancyhf{} % delete current header and footer
% \fancyhead[LE,RO]{\bfseries\thepage}
% \fancyhead[CO]{\bfseries\rightmark}
% \fancyhead[CE]{\bfseries\leftmark}
% \renewcommand{\headrulewidth}{0.5pt}
% \renewcommand{\footrulewidth}{0pt}
% \addtolength{\headheight}{14.5 pt} % space for the rule
% \fancypagestyle{plain}{
% \fancyhead{} % get rid of headers on plain pages
% \renewcommand{\headrulewidth}{0pt} % and the line
% }

% Encabezado y pie de página general
\fancypagestyle{general} {
   \fancyhf{}
   \fancyfoot{}
   \fancyhead{}
   \fancyhead[LO]{\footnotesize{\leftmark}}
   \fancyhead[RE]{\footnotesize{\rightmark}}
   \fancyhead[RO]{\footnotesize{\thepage}}
   \fancyhead[LE]{\footnotesize{\thepage}}
   \renewcommand{\headrulewidth}{0pt}
   \renewcommand{\footrulewidth}{0pt}
   }

\fancypagestyle{plain} {
   \fancyhf{}
   \fancyfoot{}
   \fancyhead{}
   \fancyfoot[RO]{\footnotesize{\thepage}}
   \fancyfoot[LE]{\footnotesize{\thepage}}
   \renewcommand{\headrulewidth}{0pt}
   \renewcommand{\footrulewidth}{0pt}
}

% Encabezado y pie de página de la carátula
\fancypagestyle{carat} {
   \fancyhf{}
   \fancyfoot{}
   \fancyhead[LO]{\scalebox{0.35}{\includegraphics{./figures/logo_uba.jpg}}}
   \fancyhead[RO]{\scalebox{0.3}{\includegraphics{./figures/logo_fiuba.jpg}}}
   \renewcommand{\headrulewidth}{0pt}
   \renewcommand{\footrulewidth}{0pt}
}

% Quito los encabezados y pies de página en las hojas vacías
\makeatletter
  \def\cleardoublepage{\clearpage\if@twoside \ifodd\c@page\else
  \vspace*{\fill}
  \thispagestyle{empty}
  \newpage
  \if@twocolumn\hbox{}\newpage\fi\fi\fi}
\makeatother

% Espaciado en el índice entre el número y el título
\makeatletter
\renewcommand*{\l@subsection}{\@dottedtocline{1}{3.8em}{3.5em}}
\renewcommand*{\l@figure}{\@dottedtocline{1}{1.5em}{3.3em}}
\renewcommand*{\l@table}{\@dottedtocline{1}{1.5em}{2.8em}}
\makeatother

% Formateo del código fuente
\lstset {
   %extendedchars=true,
   %labelstep=0,
   %labelsep=3ex,
   %frame=trbl,
   %frameround=tttt,
   %framespread=-3ex,
   %framerulecolor=colorFondoListado,
   %backgroundcolor=colorFondoListado,
   captionpos=b,
   breaklines=true,
   %linewidth=0.98\linewidth,
   %indent=5ex,
   tabsize=4,
   %labelstyle=\small\ttfamily,
   basicstyle=\scriptsize\sffamily,
   %numberstyle=\small\sffamily,
   identifierstyle=\scriptsize\sffamily,
   commentstyle=\scriptsize\itshape,
   stringstyle=\scriptsize\sffamily,
   keywordstyle=\scriptsize\bfseries\sffamily,
   ndkeywordstyle=\scriptsize\bfseries\sffamily,
   showstringspaces=false,
   flexiblecolumns=false
   visiblespaces=false
   %stringspaces=false
}

% Comandos para matemática
\newtheorem{defi}{Definición}[chapter]
\newtheorem{ejem}{Ejemplo}[chapter]
\newtheorem{teor}{Teorema}[chapter]
\newtheorem{prop}[teor]{Proposición}
\newtheorem{lema}[teor]{Lema}
\newtheorem{cor}[teor]{Corolario}

%Se declaran las funciones matemáticas que deberán reconocerse como texto
\DeclareMathOperator{\sen}{sen}
\DeclareMathOperator{\supr}{sup}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\lip}{lip}

% Para no separar en sílabas se activa el comando siguiente
% \hyphenpenalty=10000

% Encabezado y pie de página por defecto
\pagestyle{general}

\begin{document}

\renewcommand{\contentsname}{Índice}
\renewcommand{\partname}{Parte}
\renewcommand{\chaptername}{Capítulo}
\renewcommand{\appendixname}{Apéndice}
\renewcommand{\bibname}{Referencias}
\renewcommand{\figurename}{Figura}
\renewcommand{\listfigurename}{Índice de Figuras}
\renewcommand{\tablename}{Tabla}
\renewcommand{\listtablename}{Índice de Tablas}

\hyphenation{soft-ware hard-ware}

% Secciones preliminares
\frontmatter
\include{caratula}
\newpage
\thispagestyle{empty}

\

\include{resumen}
\newpage
\thispagestyle{empty}

\

\include{agradecimientos}
\newpage
\thispagestyle{empty}

\

\include{dedicatoria}
\newpage
\thispagestyle{empty}

\

\tableofcontents
\listoftables
\listoffigures

% Cuerpo principal
\mainmatter
\include{cap01}
% \include{cap02}
% \include{cap03}
% \include{cap04}
% \include{cap05}
% \include{cap06}

% Apéndices
% \appendix
% \include{apA}
% \include{apB}
% \include{apC}

% Adjuntos y anexos
% \backmatter
% \include{acronimos}
% \newpage
\thispagestyle{empty}

\

% \include{bibliografia}
\newpage
\thispagestyle{empty}

\

\include{firma}

\end{document}
